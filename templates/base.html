<!DOCTYPE html>
<html lang="ua">
<head>
<meta charset="UTF-8">
<title>{% block title %}{% endblock %}</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.ico') }}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<div class="main-layout">
<nav class="sidebar" id="sidebar">
<div class="sidebar-header">
<button id="toggle-btn" class="toggle-button" aria-label="Toggle Menu" title="Меню" onclick="toggleSidebar()">
<svg id="toggle-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
<path fill-rule="evenodd" d="M1.5 12a.5.5 0 010-1h13a.5.5 0 010 1h-13zm0-4a.5.5 0 010-1h13a.5.5 0 010 1h-13zm0-4a.5.5 0 010-1h13a.5.5 0 010 1h-13z"/>
</svg>
</button>
</div>
<ul class="nav flex-column mt-3">
<li><a class="nav-link {% block main %}{% endblock %}" href="{{ url_for('index') }}">Головна</a></li>
<li><a class="nav-link {% block hierarchy %}{% endblock %}" href="{{ url_for('hierarchy.index') }}">Аналіз Ієрархій</a></li>
<li><a class="nav-link {% block binary %}{% endblock %}" href="{{ url_for('binary_relations.index') }}">Бінарне Відношення</a></li>
<li><a class="nav-link {% block expert %}{% endblock %}" href="{{ url_for('experts.index') }}">Експертні Оцінки</a></li>
<li><a class="nav-link {% block laplasa %}{% endblock %}" href="{{ url_for('kriteriy_laplasa.index') }}">Критерій Лапласа</a></li>
<li><a class="nav-link {% block info %}{% endblock %}" href="{{ url_for('documentation') }}">Довідка</a></li>
</ul>
<div class="sidebar-footer mt-auto">
{% if name %}
<!-- Красивая карточка профиля для развернутого сайдбара -->
<div class="user-profile-card">
    <div class="user-avatar-container">
        <a href="{{ url_for('profile') }}">
            <img src="{{ url_for('static', filename='img/user_profile.png') }}" alt="Profile" class="user-avatar">
        </a>
    </div>
    <div class="user-info">
        <a href="{{ url_for('profile') }}" class="user-name">{{ name }}</a>
        <div class="user-actions">
            <a href="{{ url_for('profile') }}" class="action-btn profile-btn">
                <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                </svg>
                Профіль
            </a>
            <a href="{{ url_for('logout') }}" class="action-btn logout-btn-card">
                <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                    <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
                </svg>
                Вихід
            </a>
        </div>
    </div>
</div>

<!-- Старые элементы для свернутого сайдбара (остаются без изменений) -->
<a href="{{ url_for('profile') }}" class="avatar-link">
<img src="{{ url_for('static', filename='img/user_profile.png') }}" alt="Profile" width="55">
</a>
<div class="sidebar-separator"></div>
<!-- Кнопка выхода (развёрнутый вид) -->
<a class="btn btn-danger mt-2 logout-btn" href="{{ url_for('logout') }}">Logout</a>
<!-- Иконка выхода (только в свернутом сайдбаре) -->
<a href="{{ url_for('logout') }}" class="logout-icon" title="Вийти">
<img src="{{ url_for('static', filename='img/logout_icon.png') }}" alt="Logout" width="55" />
</a>
{% else %}
<a href="{{ url_for('login') }}" class="login-btn btn btn-info d-none d-md-inline-block">Login</a>
<a href="{{ url_for('login') }}" class="login-icon d-block d-md-none" title="Login">
<img src="{{ url_for('static', filename='img/login_icon.png') }}" alt="Login" width="55"/>
</a>
{% endif %}
</div>
</nav>
<main class="content" id="main-content">
<div class="container pt-4">
{% block content %}{% endblock %}
</div>
</main>
</div>
<script>
function toggleSidebar() {
const sidebar = document.getElementById("sidebar");
const content = document.getElementById("main-content");
const toggleIcon = document.getElementById("toggle-icon");
const isCollapsed = sidebar.classList.toggle("collapsed");
content.classList.toggle("expanded", isCollapsed);
toggleIcon.classList.toggle("rotated", isCollapsed);
}
</script>
</body>
</html>